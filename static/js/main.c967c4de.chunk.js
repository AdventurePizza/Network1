(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t){},194:function(e,t,n){},196:function(e,t,n){},226:function(e,t){},228:function(e,t){},238:function(e,t){},240:function(e,t){},267:function(e,t){},269:function(e,t){},270:function(e,t){},276:function(e,t){},278:function(e,t){},296:function(e,t){},298:function(e,t){},310:function(e,t){},313:function(e,t){},343:function(e,t,n){"use strict";n.r(t);var r=n(15),c=(n(194),n(40)),s=n(8),a=n(0),o=n.n(a),i=n(30),u=n(20),l=(n(196),n(1)),f=n.n(l),d=n(358),p=n(185),b=n.n(p),j=n(14),h=n(188),O=n(359),x=f.a.createContext({getProfileFB:function(){return Promise.resolve({isSuccessful:!1})},setProfileFB:function(){return Promise.resolve({isSuccessful:!1})},getAllProfilesFB:function(){return Promise.resolve({isSuccessful:!1})}}),m="https://network1-backend.herokuapp.com",v=function(e){var t=e.children,n=Object(l.useCallback)(function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m+"/users/profile/".concat(t),{method:"GET"});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),c=Object(l.useCallback)(function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m+"/users/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:t})});case 2:if(!(n=e.sent).ok){e.next=5;break}return e.abrupt("return",{isSuccessful:!0});case 5:return e.abrupt("return",{isSuccessful:!1,message:n.statusText});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=Object(l.useCallback)(Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m+"/users/allProfiles",{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=7;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),[]);return Object(r.jsx)(x.Provider,{value:{getProfileFB:n,setProfileFB:c,getAllProfilesFB:s},children:t})},k="localhost"===window.location.hostname?"ws://localhost:8000":"wss://network1-backend.herokuapp.com",g=b()(k,{transports:["websocket"]}),y=new j.i({name:"Beacon Docs"}),w=Object(O.a)();var P=function(){var e=Object(l.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],f=Object(l.useState)("sync"),p=Object(u.a)(f,2),b=p[0],j=p[1],O=Object(l.useState)(!1),m=Object(u.a)(O,2),v=m[0],k=m[1],P=Object(l.useState)("#000000"),A=Object(u.a)(P,2),S=A[0],C=A[1],F=Object(l.useContext)(x),B=F.getProfileFB,T=F.setProfileFB,z=F.getAllProfilesFB,E=Object(l.useState)({color:S,timestamp:Date.now(),key:w,username:"anon"}),R=Object(u.a)(E,2),N=R[0],q=R[1],D=Object(l.useState)([{color:"blue",timestamp:Date.now(),key:w,username:"user x"}]),G=Object(u.a)(D,2),J=G[0],L=G[1];function I(e){return X.apply(this,arguments)}function X(){return(X=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n            {\n              reverseRecord(address: "'+t+'"){owner domain{name}}\n            }\n            ',variables:{}})}).then((function(e){return e.json()})).then((function(e){e.data.reverseRecord&&(n=e.data.reverseRecord.domain.name,j(n),q(Object(c.a)(Object(c.a)({},N),{},{username:n})))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,y.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n&&y.clearActiveAccount().then(Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,y.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),j("sync"),k(!1);case 7:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,y.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=12;break}return j(n.address),k(!0),I(n.address),e.abrupt("return",n);case 12:return e.prev=12,console.log("Requesting permissions..."),e.next=16,y.requestPermissions();case 16:return t=e.sent,e.t2=a,e.next=20,y.getActiveAccount();case 20:e.t3=e.sent,(0,e.t2)(e.t3),console.log("Got permissions:",t.address),j(t.address),k(!0),I(t.address),e.next=31;break;case 28:e.prev=28,e.t4=e.catch(12),console.log("Got error:",e.t4);case 31:case"end":return e.stop()}}),e,null,[[12,28]])})))).apply(this,arguments)}return Object(l.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=L,e.next=3,z();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){var e=function(e){console.log(e),console.log(e.key),J.find((function(t,n){return t.key===e.key&&(console.log("found ez ! "+n),L([].concat(Object(s.a)(J.slice(0,n)),[e],Object(s.a)(J.slice(n+1)))),!0)}))};return g.on("profile",e),function(){g.off("profile",e)}}),[J,L]),Object(l.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,y.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=16;break}return j(n.address.slice(0,6)+"..."+n.address.slice(32,36)),k(!0),I(n.address),e.t2=q,e.next=12,B(n.address);case 12:e.t3=e.sent,(0,e.t2)(e.t3),e.next=18;break;case 16:j("sync"),k(!1);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"top-left",style:{fontSize:"1em",display:"flex",alignItems:"center",margin:10},children:Object(r.jsx)("b",{children:"Network1"})}),Object(r.jsxs)("div",{style:{display:"flex",width:"90%",marginLeft:"auto",marginRight:"auto",overflowX:"scroll"},children:[Object(r.jsxs)("div",{style:{textAlign:"center",margin:6},children:[Object(r.jsx)("div",{style:{width:100,height:50,backgroundColor:N.color,border:"solid 4px ",margin:4}}),N.username]}),J&&J.map((function(e){return(!n||e.key!==n.address)&&Object(r.jsxs)("div",{style:{textAlign:"center",margin:6},children:[Object(r.jsx)("div",{style:{width:100,height:50,backgroundColor:e.color,border:"solid 4px ",margin:4}}),e.username]},e.key)}))]}),Object(r.jsxs)("div",{style:{width:"90%",marginLeft:"auto",marginRight:"auto"},children:[Object(r.jsx)(h.a,{color:S,onChange:C}),Object(r.jsx)("br",{}),Object(r.jsxs)(d.a,{size:"small",title:"update status",onClick:function(){n&&(q(Object(c.a)(Object(c.a)({},N),{},{color:S,key:n.address})),g.emit("profile",Object(c.a)(Object(c.a)({},N),{},{color:S,key:n.address})),T(Object(c.a)(Object(c.a)({},N),{},{color:S,key:n.address})))},children:["  ",n?Object(r.jsx)("u",{children:"update status"}):Object(r.jsx)("u",{children:"sync to join network1"})," "]})]}),Object(r.jsxs)("div",{className:"bottom-right",style:{position:"absolute",display:"flex"},children:[v&&Object(r.jsxs)(d.a,{size:"small",title:"unsync",onClick:function(){!function(){H.apply(this,arguments)}()},children:[Object(r.jsx)("u",{children:"unsync"})," "]}),v&&Object(r.jsx)("div",{children:" | "}),Object(r.jsxs)(d.a,{title:"sync",size:"small",onClick:Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:case"end":return e.stop()}}),e)}))),children:[Object(r.jsx)("u",{children:b})," "]})]})]})},A=n(57),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,360)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};n.n(A).a.render(Object(r.jsx)(v,{children:Object(r.jsx)(P,{})}),document.getElementById("root")),S()}},[[343,1,2]]]);
//# sourceMappingURL=main.c967c4de.chunk.js.map