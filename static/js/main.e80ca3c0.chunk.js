(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{156:function(e,t){},234:function(e,t,n){},236:function(e,t,n){},266:function(e,t){},268:function(e,t){},278:function(e,t){},280:function(e,t){},307:function(e,t){},309:function(e,t){},310:function(e,t){},316:function(e,t){},318:function(e,t){},336:function(e,t){},338:function(e,t){},350:function(e,t){},353:function(e,t){},384:function(e,t,n){"use strict";n.r(t);var r=n(13),s=(n(234),n(57)),c=n(12),a=n(0),i=n.n(a),o=n(37),u=n(22),l=(n(236),n(1)),d=n.n(l),f=n(430),b=n(434),j=n(428),p=n(432),h=n(218),m=n.n(h),x=n(24),O=n(221),v=n(431),g=d.a.createContext({getProfileFB:function(){return Promise.resolve({isSuccessful:!1})},setProfileFB:function(){return Promise.resolve({isSuccessful:!1})},getAllProfilesFB:function(){return Promise.resolve({isSuccessful:!1})}}),k="https://network1-backend.herokuapp.com",y=function(e){var t=e.children,n=Object(l.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k+"/users/profile/".concat(t),{method:"GET"});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=Object(l.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k+"/users/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:t})});case 2:if(!(n=e.sent).ok){e.next=5;break}return e.abrupt("return",{isSuccessful:!0});case 5:return e.abrupt("return",{isSuccessful:!1,message:n.statusText});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),c=Object(l.useCallback)(Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k+"/users/allProfiles",{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=7;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),[]);return Object(r.jsx)(g.Provider,{value:{getProfileFB:n,setProfileFB:s,getAllProfilesFB:c},children:t})},w=n(108),S="localhost"===window.location.hostname?"ws://localhost:8000":"wss://network1-backend.herokuapp.com",A=m()(S,{transports:["websocket"]}),C=new x.i({name:"Beacon Docs"}),F=["0","v1.0","v2.0","v3.0","v4.0"],P=Object(v.a)();var z=function(){var e=Object(l.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],h=Object(l.useState)("sync"),m=Object(u.a)(h,2),x=m[0],v=m[1],k=Object(l.useState)(!1),y=Object(u.a)(k,2),S=y[0],z=y[1],B=Object(l.useState)("#FFFF00"),T=Object(u.a)(B,2),N=T[0],I=T[1],E=Object(l.useContext)(g),L=E.getProfileFB,D=E.setProfileFB,R=E.getAllProfilesFB,G=Object(l.useState)({color:N,timestamp:Date.now(),key:P,username:""}),q=Object(u.a)(G,2),J=q[0],X=q[1],H=Object(l.useState)([{color:"blue",timestamp:Date.now(),key:P,username:"user x"}]),K=Object(u.a)(H,2),U=K[0],M=K[1],Q=d.a.useState(""),V=Object(u.a)(Q,2),W=V[0],Y=V[1],Z=Object(w.b)().enqueueSnackbar,$=Object(l.useState)([]),_=Object(u.a)($,2),ee=_[0],te=_[1],ne=Object(l.useState)(1),re=Object(u.a)(ne,1)[0];function se(){return(se=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,C.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n&&C.clearActiveAccount().then(Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,C.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),v("sync"),z(!1);case 7:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return ae.apply(this,arguments)}function ae(){return(ae=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,C.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=11;break}return v(n.address),z(!0),e.abrupt("return",n);case 11:return e.prev=11,console.log("Requesting permissions..."),e.next=15,C.requestPermissions();case 15:return t=e.sent,e.t2=a,e.next=19,C.getActiveAccount();case 19:e.t3=e.sent,(0,e.t2)(e.t3),console.log("Got permissions:",t.address),v(t.address),z(!0),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(11),console.log("Got error:",e.t4);case 29:case"end":return e.stop()}}),e,null,[[11,26]])})))).apply(this,arguments)}function ie(){if(n){var e=Date.now();console.log(e),X(Object(s.a)(Object(s.a)({},J),{},{color:N,key:n.address,username:W,timestamp:e})),A.emit("profile",Object(s.a)(Object(s.a)({},J),{},{color:N,key:n.address,username:W,timestamp:e})),D(Object(s.a)(Object(s.a)({},J),{},{color:N,key:n.address,username:W,timestamp:e})),te(ee.concat([Object(s.a)(Object(s.a)({},J),{},{color:N,key:n.address,username:W,timestamp:e})]).sort((function(e,t){return parseFloat(t.timestamp)-parseFloat(e.timestamp)}))),Z("Status Updated ! ",{variant:"success"}),Y("")}else ce()}return Object(l.useEffect)((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:t=e.sent,M(t.recentStatus),te(t.history);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[R]),Object(l.useEffect)((function(){var e=function(e){te(ee.concat(e).sort((function(e,t){return parseFloat(t.timestamp)-parseFloat(e.timestamp)}))),U.find((function(t,n){return t.key===e.key&&(M([].concat(Object(c.a)(U.slice(0,n)),[e],Object(c.a)(U.slice(n+1)))),!0)}))};return A.on("profile",e),function(){A.off("profile",e)}}),[U,M,ee]),Object(l.useEffect)((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,C.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=15;break}return v(n.address.slice(0,6)+"..."+n.address.slice(32,36)),z(!0),e.next=10,L(n.address);case 10:t=e.sent,X(t),Y(t.username),e.next=17;break;case 15:v("sync"),z(!1);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,L]),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"top-left",style:{fontSize:"1em",display:"flex",alignItems:"center",margin:6},children:[Object(r.jsx)("b",{children:"Network "}),"\xa0",Object(r.jsxs)(f.a,{value:re,label:"version",onChange:function(e){var t;return console.log(e.target.value),2===e.target.value?t="https://adventurepizza.github.io/Network2/":3===e.target.value?t="https://adventurepizza.github.io/Network3/":4===e.target.value&&(t="https://adventurepizza.github.io/Network4/"),window.location.href=t,null},children:[Object(r.jsxs)(b.a,{value:1,children:[" ",F[1]]}),Object(r.jsxs)(b.a,{value:2,children:[" ",F[2]]}),Object(r.jsxs)(b.a,{value:3,children:[" ",F[3]]}),Object(r.jsxs)(b.a,{value:4,children:[" ",F[4]]})]}),"\xa0 \ud83d\udce0"]}),Object(r.jsx)("div",{style:{fontSize:"0.9em",marginTop:13,marginLeft:13},children:Object(r.jsx)("b",{children:"History"})}),Object(r.jsx)("div",{style:{display:"flex",width:"90%",marginLeft:"auto",marginRight:"auto",overflowX:"scroll"},children:ee&&ee.map((function(e){return Object(r.jsxs)("div",{style:{textAlign:"center",margin:6},children:[Object(r.jsx)("div",{style:{width:80,height:20,backgroundColor:e.color,border:"solid 4px ",marginInline:4}}),Object(r.jsxs)(j.a,{title:e.key,size:"small",onClick:Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(e.key),Z("Address copied ! "+e.key,{variant:"success"});case 2:case"end":return t.stop()}}),t)}))),children:[e.username," "]})]},e.timestamp)}))}),Object(r.jsx)("div",{style:{fontSize:"0.9em",marginTop:6,marginLeft:13},children:Object(r.jsx)("b",{children:"Recent Status"})}),Object(r.jsxs)("div",{style:{display:"flex",width:"90%",marginLeft:"auto",marginRight:"auto",overflowX:"scroll"},children:[Object(r.jsxs)("div",{style:{textAlign:"center",margin:6},children:[Object(r.jsx)("div",{style:{width:80,height:20,backgroundColor:J.color,border:"solid 4px ",marginInline:4}}),Object(r.jsxs)(j.a,{title:J.key,size:"small",onClick:Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(J.key),Z("Address copied ! "+J.key,{variant:"success"});case 2:case"end":return e.stop()}}),e)}))),children:[J.username," "]})]}),U&&U.map((function(e){return(!n||e.key!==n.address)&&Object(r.jsxs)("div",{style:{textAlign:"center",margin:6},children:[Object(r.jsx)("div",{style:{width:80,height:20,backgroundColor:e.color,border:"solid 4px ",marginInline:4}}),Object(r.jsxs)(j.a,{title:e.key,size:"small",onClick:Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(e.key),Z("Address copied ! "+e.key,{variant:"success"});case 2:case"end":return t.stop()}}),t)}))),children:[e.username," "]})]},e.key)}))]}),Object(r.jsxs)("div",{style:{width:"90%",marginLeft:"auto",marginRight:"auto"},children:[Object(r.jsx)(O.a,{color:N,onChange:I}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(p.a,{id:"outlined-basic",label:"info",variant:"outlined",placeholder:"Status",size:"small",onChange:function(e){e.target.value.length<25?Y(e.target.value):Y(e.target.value.slice(0,25))},value:W,onKeyPress:function(e){"Enter"===e.key&&ie()}}),Object(r.jsxs)(j.a,{size:"small",title:"update status",onClick:function(){ie()},children:[" ",n?Object(r.jsx)("u",{children:"update status"}):Object(r.jsx)("u",{children:"sync to join network1"})," "]})]})]}),Object(r.jsx)("div",{className:"bottom-left",style:{position:"absolute"},children:Object(r.jsxs)(j.a,{title:"Adventure Networks",size:"small",onClick:function(){},children:[" ",Object(r.jsxs)("div",{style:{textAlign:"left"},children:[" ","Adventure ",Object(r.jsx)("br",{}),"Networks"," "]})," "]})}),Object(r.jsxs)("div",{className:"bottom-right",style:{position:"absolute",display:"flex",alignItems:"center"},children:[S&&Object(r.jsxs)(j.a,{size:"small",title:"unsync",onClick:function(){!function(){se.apply(this,arguments)}()},children:[Object(r.jsx)("u",{children:"unsync"})," "]}),S&&Object(r.jsx)("div",{children:" | "}),Object(r.jsxs)(j.a,{title:"sync",size:"small",onClick:Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:case"end":return e.stop()}}),e)}))),children:[Object(r.jsx)("u",{children:x})," "]})]})]})},B=n(20),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,435)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};n.n(B).a.render(Object(r.jsx)(y,{children:Object(r.jsx)(w.a,{maxSnack:3,children:Object(r.jsx)(z,{})})}),document.getElementById("root")),T()}},[[384,1,2]]]);
//# sourceMappingURL=main.e80ca3c0.chunk.js.map